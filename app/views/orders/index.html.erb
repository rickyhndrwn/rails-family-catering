<p style="color: green"><%= notice %></p>

<h1>Orders</h1>

<%= link_to "Create Order", new_order_path, class:'btn btn-secondary' %>
<br><br>
<table class="table table-striped table-bordered">
  <thead class="table-dark">
    <tr>
      <th scope="col">No</th>
      <th scope="col">Order Date</th>
      <th scope="col">Total Price</th>
      <th scope="col">Order Status</th>
      <th scope="col">Customer</th>
      <th scope="col">Ordered Item(s)</th>
      <th scope="col" colspan="2">Action</th>
    </tr>
  </thead>
  <tbody>
    <% @orders.each_with_index do |order, index| %>
    <tr>
      <td><%= index + 1 %></td>
      <td><%= order.order_date %></td>
      <td><%= order.total_price %></td>
      <td><%= order.status %></td>
      <td>
        <%= order.customer.name %> (<%= order.customer.email %>)
      </td>
      <td>
        <% order.carts.each do |cart| %>
        <li><%= cart.item.name %> (Qty: <%= cart.quantity %>)</li>
        <% end %>
      </td>
      <td>
          <%= link_to "Show", order, class:'btn btn-primary' %>
          <%= link_to "Edit", edit_order_path(order), class:'btn btn-secondary' %>
      </td>
      <td>
          <%= button_to "Delete", order, method: :delete, class:'btn btn-danger' %>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>
